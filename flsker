import subprocess
import tkinter as tk
from tkinter import messagebox

def run_script():
    asset_class = asset_class_var.get()
    jurisdiction = jurisdiction_var.get()
    recon_type = recon_type_var.get()
    recon_date = recon_date_var.get()

    # Call the shell script using bash (adjust this if you are using WSL or Git Bash)
    try:
        command = ["bash", "DynamicLoad.sh", asset_class, jurisdiction, recon_type, recon_date]
        result = subprocess.run(command, capture_output=True, text=True)
        
        # Show the result of the script in a message box
        messagebox.showinfo("Script Output", result.stdout)
        
    except Exception as e:
        messagebox.showerror("Error", f"An error occurred: {e}")

# Create the main window
root = tk.Tk()
root.title("Shell Script Frontend")

# Asset Class selection
asset_class_var = tk.StringVar()
asset_class_label = tk.Label(root, text="Select Asset Class:")
asset_class_label.pack()
asset_class_options = ["FX", "IR", "EQ", "CO", "CD"]
asset_class_menu = tk.OptionMenu(root, asset_class_var, *asset_class_options)
asset_class_menu.pack()

# Jurisdiction selection
jurisdiction_var = tk.StringVar()
jurisdiction_label = tk.Label(root, text="Select Jurisdiction:")
jurisdiction_label.pack()
jurisdiction_options = ["JESA", "CANADA", "MAS", "MAS TA", "KMA", "HKTR", "ESMA", "MAS ASIC", "CFTC", "ASIC", "SEC", "FCA", "ASIC TA", "DSMATCH"]
jurisdiction_menu = tk.OptionMenu(root, jurisdiction_var, *jurisdiction_options)
jurisdiction_menu.pack()

# Recon Type selection
recon_type_var = tk.StringVar()
recon_type_label = tk.Label(root, text="Select Recon Type:")
recon_type_label.pack()
recon_type_options = ["COMP", "POS"]
recon_type_menu = tk.OptionMenu(root, recon_type_var, *recon_type_options)
recon_type_menu.pack()

# Date input
recon_date_var = tk.StringVar()
recon_date_label = tk.Label(root, text="Enter Recon Date (YYMMDD):")
recon_date_label.pack()
recon_date_entry = tk.Entry(root, textvariable=recon_date_var)
recon_date_entry.pack()

# Submit button
submit_button = tk.Button(root, text="Run Script", command=run_script)
submit_button.pack()

# Run the GUI event loop
root.mainloop()
